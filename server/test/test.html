<!DOCTYPE html>
<html>
<head lang="en">
<meta charset="UTF-8">
<title></title>
</head>
<body>
<script src="/socket.io/socket.io.js"></script>
<script>

    function write(str) {
        document.write(str);
    }
var socket = io('http://127.0.0.1:8888');
// Login
socket.on ('connect', function() {
    socket.emit('SC_login', {}, function (data) {
        write(data);
    });

    socket.on('SC_gameid', function (data) {
        var game_id = data['game_id'];
        write('New game id:' + game_id);

        xmlhttp = new XMLHttpRequest();
        var url = 'http://127.0.0.1:8888/PL_login';
        xmlhttp.open('POST', url, true);
        xmlhttp.onreadystatechange = function () { //Call a function when the state changes.
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                alert(xmlhttp.responseText);
            }
        }
        var parameters = {
            "game_id": game_id,
            "user_id": 111
        };
        var p = "game_id=1&user_id=111"
// Neither was accepted when I set with parameters="username=myname"+"&password=mypass" as the server may not accept that
        xmlhttp.send(p);
    });
});

//socket.on('news', function (data) {
//  console.log(data);
//  socket.emit('SC_login', { my: 'dataaaaa' });
//});
</script>
</body>
</html>
